<!doctype html>
<html lang="br">
<head>
    <title>FLAVINHO</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" type="text/css" href="./style.css" media="screen">
</head>
<body>
    <div><img src="public /CSS/imagens/imgbackground.png" style="width: 100%"></div> 
<form action="{{ route('form.store') }}" method="POST" enctype="multipart/form-data">
    <div class="linha2">
        <div class="coluna-30">
            <select name="tipo_servico" class="select-input" required>
                <option>Pintura</option>
                <option>Eletrica</option>
                <option>Reparo</option>
            </select>
        </div>
        <div class="coluna-30">
            <select name="subserviço" class="select-input" required>
                <option>Pintura de Cômodo</option>
                <option>Pintura Externa</option>
                <option>Pintura de Móveis</option>
            </select>
        </div>
        <div class="coluna-30">
            <select name="detalhe" class="select-input" required>
                <option>Pintura de Quarto</option>
                <option>Pintura de Sala</option>
                <option>Pintura de Banheiro</option>
                <option>Pintura de Cozinha</option>
                <option>Pintura da Copa</option>
                <option>Pintura da Lateral da casa</option>
                <option>Pintura da Frente da Casa </option>
                <option>Pintura de Casa completa</option>
            </select>
        </div>
    </div>
    <div>
        <div class="form1">
            <div class="coluna-30">
                <input class="input-form text-input" name="nome" placeholder="Nome" required>
            </div>
            <div class="coluna-30">
                <input class="input-form text-input"name="email"  placeholder="E-mail" required>
            </div>
        </div>
    </div>
    <div class="form2">
        <div class="coluna-30">
            <input class="input-form text-input"name="telefone1"  placeholder="Telefone 1" required>
        </div>
        <div class="coluna-30">
            <input class="input-form text-input"name="telefone2"  placeholder="Telefone 2">
        </div>
    </div>
    <div>
        <div class="form3">
            <div class="coluna-30">
                <input class="input-form text-input"name="endereco"  placeholder="Endereço Completo" required>
            </div>
            <div class="coluna-30">
                <input class="input-form text-input"name="municipio"  placeholder="Municipio" required>
            </div>
        </div>
    </div>

    <div class="linha4">
        <textarea class="text_area"name="descricao_servico"  placeholder="*Descreva o serviço a ser solicitado." required></textarea>
    </div>

    <div class="linha3">
        <button id="downloadPdfButton" class="button button2"> Solicitar</button>
    </div>

    <div class="linha3" style="padding-top: 2%">Após gerar o arquivo de solicitação, envie o PDF para o WhatsApp Abaixo</div>

</form>
    <div id="pdf-content" style="display: none;">
        <h1>Relatório de Solicitação de Serviço</h1>

        <p><strong>Tipo de Serviço:</strong> <span id="tipo_servico"></span></p>
        <p><strong>Opção 1:</strong> <span id="subservico"></span></p>
        <p><strong>Opção 2:</strong> <span id="detalhe"></span></p>

        <h2>Informações do Solicitante</h2>
        <p><strong>Nome:</strong> <span id="nome"></span></p>
        <p><strong>E-mail:</strong> <span id="email"></span></p>
        <p><strong>Telefone 1:</strong> <span id="telefone1"></span></p>
        <p><strong>Telefone 2:</strong> <span id="telefone2"></span></p>

        <h2>Localização</h2>
        <p><strong>Endereço Completo:</strong> <span id="endereco"></span></p>
        <p><strong>Município:</strong> <span id="municipio"></span></p>

        <h2>Descrição do Serviço</h2>
        <p id="descricao_servico"></p>
    </div>

<footer id="rodapé">
    <div style="display: flex; flex-direction: column; align-items: center; margin-top: 1%">
        <div class="textorodape">
            <p>Não sabe ou está sem tempo para fazer aquele reparo.</p>
            <p>Estou aqui para lhe ajudar.</p>
            <p>E para te atender da melhor forma possível, Confira nossos contatos abaixo:</p>
        </div>
        <div style="font-size: 30px; text-align: center;">
            <p>Horário de Atendimento: Segunda a Sexta de 8:00 às 18:00.</p>
        </div>
        <div class="linhalogo" style="display: flex; justify-content: space-between; width: 100%;">
            <a class="coluna-30icon" target="_blank" href="https://www.linkedin.com//">
                <img width="60px" class="instagram" src="public /CSS/imagens/linkedin.png" alt="Linkedin">
            </a>
            <a class="coluna-30icon" style="align-items: center" target="_blank"
               href="https://www.instagram.com/">
                <img width="60px" class="instagram" src="public /CSS/imagens/instagram.png" alt="Instagram">
            </a>
            <a class="coluna-30icon" target="_blank" href="https://api.whatsapp.com/send?phone=5527981116969">
                <img width="60px" class="instagram" src="public /CSS/imagens/whatsapp.png" alt="WhatsApp">
            </a>
        </div>
    </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
        document.getElementById('downloadPdfButton').addEventListener('click', function(event) {
            event.preventDefault(); // Impede o envio do formulário

            const form = document.querySelector('form');
            const formData = new FormData(form);

            // Preenchendo os elementos HTML com os dados do formulário
            document.getElementById('tipo_servico').innerText = formData.get('tipo_servico');
            document.getElementById('subservico').innerText = formData.get('subserviço');
            document.getElementById('detalhe').innerText = formData.get('detalhe');
            document.getElementById('nome').innerText = formData.get('nome');
            document.getElementById('email').innerText = formData.get('email');
            document.getElementById('telefone1').innerText = formData.get('telefone1');
            document.getElementById('telefone2').innerText = formData.get('telefone2');
            document.getElementById('endereco').innerText = formData.get('endereco');
            document.getElementById('municipio').innerText = formData.get('municipio');
            document.getElementById('descricao_servico').innerText = formData.get('descricao_servico');

            // Criando o nome do arquivo
            const nomeArquivo = formData.get('nome').toLowerCase().replace(/\s+/g, '-') + ".pdf";

            // Gerando o PDF a partir do HTML
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();

            pdf.html(document.getElementById('pdf-content'), {
                callback: function (pdf) {
                    pdf.save(nomeArquivo); // Faz o download
                },
                x: 10,
                y: 10
            });
        });
    </script>
</body>
</html>

