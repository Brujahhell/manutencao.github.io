<!doctype html>
<html lang="br">
<head>
    <title>FLAVINHO</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" type="text/css" href="./style.css" media="screen">
</head>
<body>
    <div><img src="public /CSS/imagens/imgbackground.png" style="width: 100%"></div> 
<form action="{{ route('form.store') }}" method="POST" enctype="multipart/form-data">
    <div class="linha2">
        <div class="coluna-30">
            <select name="tipo_servico" class="select-input" required>
                <option>Pintura</option>
                <option>Eletrica</option>
                <option>Reparo</option>
            </select>
        </div>
        <div class="coluna-30">
            <select name="subserviço" class="select-input" required>
                <option>Pintura de Cômodo</option>
                <option>Pintura Externa</option>
                <option>Pintura de Móveis</option>
            </select>
        </div>
        <div class="coluna-30">
            <select name="detalhe" class="select-input" required>
                <option>Pintura de Quarto</option>
                <option>Pintura de Sala</option>
                <option>Pintura de Banheiro</option>
                <option>Pintura de Cozinha</option>
                <option>Pintura da Copa</option>
                <option>Pintura da Lateral da casa</option>
                <option>Pintura da Frente da Casa </option>
                <option>Pintura de Casa completa</option>
            </select>
        </div>
    </div>
    <div>
        <div class="form1">
            <div class="coluna-30">
                <input class="input-form text-input" name="nome" placeholder="Nome" required>
            </div>
            <div class="coluna-30">
                <input class="input-form text-input"name="email"  placeholder="E-mail" required>
            </div>
        </div>
    </div>
    <div class="form2">
        <div class="coluna-30">
            <input class="input-form text-input"name="telefone1"  placeholder="Telefone 1" required>
        </div>
        <div class="coluna-30">
            <input class="input-form text-input"name="telefone2"  placeholder="Telefone 2">
        </div>
    </div>
    <div>
        <div class="form3">
            <div class="coluna-30">
                <input class="input-form text-input"name="endereco"  placeholder="Endereço Completo" required>
            </div>
            <div class="coluna-30">
                <input class="input-form text-input"name="municipio"  placeholder="Municipio" required>
            </div>
        </div>
    </div>

    <div class="linha4">
        <textarea class="text_area"name="descricao_servico"  placeholder="*Descreva o serviço a ser solicitado." required></textarea>
    </div>

    <div class="linha3">
        <button id="downloadPdfButton" class="button button2"> Solicitar</button>
    </div>

    <div class="linha3" style="padding-top: 2%">Após gerar o arquivo de solicitação, envie o PDF para o WhatsApp Abaixo</div>

</form>

<footer id="rodapé">
    <div style="display: flex; flex-direction: column; align-items: center; margin-top: 1%">
        <div class="textorodape">
            <p>Não sabe ou está sem tempo para fazer aquele reparo.</p>
            <p>Estou aqui para lhe ajudar.</p>
            <p>E para te atender da melhor forma possível, Confira nossos contatos abaixo:</p>
        </div>
        <div style="font-size: 30px; text-align: center;">
            <p>Horário de Atendimento: Segunda a Sexta de 8:00 às 18:00.</p>
        </div>
        <div class="linhalogo" style="display: flex; justify-content: space-between; width: 100%;">
            <a class="coluna-30icon" target="_blank" href="https://www.linkedin.com//">
                <img width="60px" class="instagram" src="public /CSS/imagens/linkedin.png" alt="Linkedin">
            </a>
            <a class="coluna-30icon" style="align-items: center" target="_blank"
               href="https://www.instagram.com/">
                <img width="60px" class="instagram" src="public /CSS/imagens/instagram.png" alt="Instagram">
            </a>
            <a class="coluna-30icon" target="_blank" href="https://api.whatsapp.com/send?phone=5527981116969">
                <img width="60px" class="instagram" src="public /CSS/imagens/whatsapp.png" alt="WhatsApp">
            </a>
        </div>
    </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
    document.getElementById('downloadPdfButton').addEventListener('click', function(event) {
        event.preventDefault(); // Impede o envio do formulário

        const form = document.querySelector('form');
        const formData = new FormData(form);

        const data = {
            tipo_servico: formData.get('tipo_servico'),
            subservico: formData.get('subserviço'),
            detalhe: formData.get('detalhe'),
            nome: formData.get('nome'),
            email: formData.get('email'),
            telefone1: formData.get('telefone1'),
            telefone2: formData.get('telefone2'),
            endereco: formData.get('endereco'),
            municipio: formData.get('municipio'),
            descricao_servico: formData.get('descricao_servico')
        };

        // Gerar nome do arquivo
        const nomeArquivo = data.nome.toLowerCase().replace(/\s+/g, '-') + ".pdf";

        // Criar PDF com jsPDF
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF();

        let y = 10; // Posição inicial no PDF
        pdf.setFontSize(16);
        pdf.text("Orçamento de Serviço", 10, y);
        y += 10;

        Object.keys(data).forEach(key => {
            pdf.setFontSize(12);
            pdf.text(`${key.replace("_", " ")}: ${data[key]}`, 10, y);
            y += 8;
        });

        // Baixar o PDF
        pdf.save(nomeArquivo);
    });
</script>
</body>
</html>

